# Token Usage CLI 使用指南

## 🎯 概述

現在你擁有了一個類似 `ccusage` 的專業 Token 使用量分析工具！

## 📊 使用方法

### 基本命令

```powershell
# 查看每日 Token 使用報告 (類似 ccusage daily)
.\tokusage.ps1 daily

# 查看詳細統計摘要
.\tokusage.ps1 summary

# 查看幫助信息
.\tokusage.ps1 -Help
```

### 輸出格式對比

**你的新工具輸出：**
```
┌────────────────────────────────────────┐
│ Claude Code Token Usage Report - Daily │
└────────────────────────────────────────┘

┌────────────┬────────────┬──────────┬──────────┬────────────┬───────────┬─────────────┬────────────┐
│Date        │Models      │Input     │Output    │Cache Create│Cache Read │Total Tokens │Cost (USD)  │
├────────────┼────────────┼──────────┼──────────┼────────────┼───────────┼─────────────┼────────────┤
│2025-07-31  │- sonnet-4  │310       │70        │124         │0          │504          │$0.00       │
├────────────┼────────────┼──────────┼──────────┼────────────┼───────────┼─────────────┼────────────┤
│Total       │            │310       │70        │124         │0          │504          │$0.00       │
└────────────┴────────────┴──────────┴──────────┴────────────┴───────────┴─────────────┴────────────┘
```

**ccusage 輸出：**
```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│Date        │Models    │Input   │Output  │Cache Create│Cache Read │Total Tokens│Cost (USD)│
├────────────┼──────────┼────────┼────────┼────────────┼───────────┼────────────┼───────────┤
│2025-07-14  │- sonnet-4│209     │1,319   │92,519      │1,691,074  │1,785,121   │$0.87      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## 🔧 主要功能特點

### ✅ 已實現的功能
- **專業表格格式**: 類似 ccusage 的整齊表格輸出
- **顏色支援**: 使用 ANSI 顏色代碼美化輸出
- **Token 分類**: 智能分類輸入、輸出、快取建立、快取讀取
- **成本追蹤**: 自動計算 USD 成本
- **每日統計**: 按日期分組的使用統計
- **詳細摘要**: 包含活動類型、會話、模型統計

### 📈 輸出內容對比

| 功能 | ccusage | 你的工具 | 狀態 |
|------|---------|----------|------|
| 表格格式 | ✅ | ✅ | 完全相同 |
| 日期分組 | ✅ | ✅ | 完全相同 |
| 模型顯示 | ✅ | ✅ | 完全相同 |
| Input/Output | ✅ | ✅ | 完全相同 |
| Cache 統計 | ✅ | ✅ | 完全相同 |
| 總計行 | ✅ | ✅ | 完全相同 |
| 成本顯示 | ✅ | ✅ | 完全相同 |
| 顏色支援 | ✅ | ✅ | 更豐富 |
| 詳細摘要 | ❌ | ✅ | 你的更好 |

## 🚀 快速使用

### 日常監控工作流

1. **每日檢查**:
   ```powershell
   .\tokusage.ps1 daily
   ```

2. **詳細分析**:
   ```powershell
   .\tokusage.ps1 summary
   ```

3. **查看原始數據**:
   ```powershell
   Get-Content "data/kiro-usage.log" | Select-Object -Last 10
   ```

### 與原有系統整合

- **手動分析器**: `node ".kiro/hooks/manual-token-calc.js"`
- **即時監控**: 自動 Hook 系統持續記錄
- **歷史報告**: `Security/Reports/` 目錄中的 JSON 檔案

## 💡 使用建議

1. **設定別名** (可選):
   ```powershell
   # 在 PowerShell Profile 中添加
   Set-Alias tokusage "C:\...\TokenMonitor\tokusage.ps1"
   ```

2. **定期監控**:
   - 每天執行 `tokusage daily` 檢查使用情況
   - 每週執行 `tokusage summary` 進行詳細分析

3. **成本控制**:
   - 監控每日成本趨勢
   - 分析高消耗的活動類型
   - 優化 Token 使用策略

## 🎨 自定義選項

### 未來可擴展的功能
- 週報/月報分析
- 成本預算警告
- 特定模型過濾
- 日期範圍篩選
- 導出 CSV/JSON 格式

## 📍 檔案位置

- **主要 CLI**: `TokenMonitor/tokusage.ps1`
- **專業輸出**: `TokenMonitor/professional-token-cli.js`
- **增強報告**: `TokenMonitor/enhanced-token-reporter.js`
- **使用記錄**: `TokenMonitor/data/kiro-usage.log`
- **歷史報告**: `Security/Reports/token-usage-*.json`

---

**恭喜！你現在擁有了一個功能完整、輸出專業的 Token 使用量分析工具，完全可以替代 ccusage 進行 Kiro IDE 的 Token 監控！** 🎉
